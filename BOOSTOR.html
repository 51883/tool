<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
  <title>BOOSTOR Pro - å®æ—¶å‡ ä½•è®¡ç®—</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&display=swap" rel="stylesheet" />
  <style>
    :root { --primary: #0f172a; --accent: #3b82f6; --bg: #f8fafc; --radius: 12px; }
    body { font-family: 'Inter', sans-serif; background: var(--bg); color: #334155; padding: 20px 10px; }
    .container { max-width: 700px; margin: 0 auto; }
    
    /* è¾“å…¥é¢æ¿ */
    .panel-group { display: flex;  gap: 20px; }
    .panel { width: 50%; background: #fff; padding: 20px; border-radius: var(--radius); border: 1px solid #e2e8f0; margin-bottom: 20px; }
    .panel-new { border-top: 4px solid var(--accent); }
    .panel-head { font-weight: 700; color: var(--primary); margin-bottom: 15px; border-bottom: 1px solid #f1f5f9; padding-bottom: 8px; }
    
    .row { display: flex; gap: 15px; margin-bottom: 15px; }
    .col { flex: 1; }
    label { display: block; font-size: 0.75rem; font-weight: 700; color: #64748b; margin-bottom: 5px; }
    input, select { width: 100%; padding: 5px; border: 1px solid #cbd5e1; border-radius: 8px; font-weight: 600; color: var(--primary); }
    
    /* ç»“æœå¤§å¡ç‰‡ */
    .result-box { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; }
    .res-card { background: var(--primary); color: #fff; padding: 15px; border-radius: var(--radius); text-align: center; }
    .res-num { font-size: 2rem; font-weight: 800; line-height: 1.1; margin: 10px 0; }
    .badge { font-size: 0.8rem; padding: 4px 8px; border-radius: 4px; background: rgba(255,255,255,0.2); }
    .badge-red { background: #fee2e2; color: #991b1b; }
    .badge-green { background: #dcfce7; color: #166534; }
    
    /* è§£é‡ŠåŒºï¼ˆæ”¹ä¸ºè´¦å•æ ·å¼ï¼‰ */
    .explain { background: #fff; border: 1px dashed #94a3b8; padding: 20px; border-radius: var(--radius); margin-top: 25px; font-size: 0.9rem; }
    .explain-h { font-weight: 700; color: var(--primary); margin-bottom: 15px; display:flex; justify-content:space-between; align-items:center; }
    
    /* è´¦å•è¡¨æ ¼å¸ƒå±€ */
    .bill-grid { display: grid; grid-template-columns: 1fr 1px 1fr; gap: 15px; margin-bottom: 20px; }
    .bill-col { display: flex; flex-direction: column; gap: 8px; }
    .bill-divider { background: #e2e8f0; height: 100%; }
    
    .bill-title { font-size: 0.85rem; font-weight: 700; color: #64748b; text-transform: uppercase; margin-bottom: 5px; text-align: center; }
    .bill-row { display: flex; justify-content: space-between; font-size: 0.85rem; }
    .bill-label { color: #64748b; }
    .bill-val { font-weight: 600; color: #0f172a; }
    .bill-note { font-size: 0.75rem; color: #94a3b8; text-align: right; margin-top:-2px; }
    
    .bill-total { border-top: 2px solid #cbd5e1; padding-top: 8px; margin-top: 5px; display: flex; justify-content: space-between; font-weight: 700; color: #0f172a; font-size: 1rem; }
    
    .highlight-val { color: #d97706; } /* æ©™è‰²é«˜äº®åŠ¨æ€å€¼ */
    .cm-tip { font-size: 0.8rem; color: #cbd5e1; margin-top: 5px; font-weight: 400; }
  </style>
</head>
<body>

<div class="container">
  <h2 style="text-align:center; color:var(--primary);">BOOSTOR Pro</h2>
  <div style="text-align:center; margin-bottom:20px; color:#64748b; font-size:0.9rem;">Fixed Rise (54mm) å‡ ä½•è®¡ç®—å™¨</div>

  <div class="panel-group" >
    <div class="panel">
        <div class="panel-head">ğŸš² åŸè½¦æ•°æ® (Old)</div>
        <div class="row">
        <div class="col"><label>æŠŠç«‹é•¿åº¦</label><input type="number" id="oldLen" value="100"></div>
        <div class="col"><label>æŠŠç«‹è§’åº¦</label><input type="number" id="oldAng" value="-6"></div>
        </div>
        <div class="row">
        <div class="col"><label>è½¦æŠŠ Reach</label><input type="number" id="oldBarReach" value="80"></div>
        <div class="col"><label>å«åœˆé«˜åº¦</label><input type="number" id="oldSpacer" value="20"></div>
        </div>
    </div>

    <div class="panel panel-new">
        <div class="panel-head">ğŸš€ æ–°è½¦ç›®æ ‡ (New)</div>
        <div class="row">
        <div class="col">
            <label>é€‰æ‹©è§„æ ¼ (Fixed Rise 54mm)</label>
            <select id="newProduct">
            <option value="90" data-phys="102.4" data-ang="14.8" selected>æŠŠé•¿ 90mm</option>
            <option value="100" data-phys="113.6" data-ang="11.4">æŠŠé•¿ 100mm</option>
            <option value="110" data-phys="122.8" data-ang="9.2">æŠŠé•¿ 110mm</option>
            <option value="120" data-phys="131.6" data-ang="7.2">æŠŠé•¿ 120mm</option>
            </select>
        </div>
        </div>
        <div class="row">
        <div class="col"><label>æ–°Reach (å›ºå®š)</label><input type="text" value="70" disabled style="background:#f1f5f9;"></div>
        <div class="col">
            <label style="color:#d97706;">æ¨¡æ‹Ÿæ–°å«åœˆ</label>
            <input type="number" id="newSpacer" value="10" style="background:#fffbeb; border-color:#fcd34d;">
        </div>
        </div>
    </div>
</div>

  <div class="result-box">
    <div class="res-card">
      <div>â†•ï¸ å‚ç›´é«˜åº¦ (Stack)</div>
      <div class="res-num" id="resStack">--</div>
      <span class="badge" id="badgeStack">--</span>
      <div class="cm-tip" id="cmTipStack"></div>
    </div>
    <div class="res-card">
      <div>â†”ï¸ å‰ä¼¸è·ç¦» (Reach)</div>
      <div class="res-num" id="resReach">--</div>
      <span class="badge" id="badgeReach">--</span>
      <div class="cm-tip" id="cmTipReach"></div>
    </div>
  </div>

  <div class="explain">
    
    <div class="explain-h">
        <span>1. é«˜åº¦æ˜ç»† (Stack)</span>
        <span style="font-size:0.75em; color:#64748b; font-weight:400;">å•ä½: mm</span>
    </div>
    <div class="bill-grid">
        <div class="bill-col">
            <div class="bill-title">Old æ—§è½¦</div>
            <div class="bill-row">
                <span class="bill-label">å«åœˆé«˜åº¦</span>
                <span class="bill-val highlight-val" id="txtOldSpacer">20</span>
            </div>
            <div class="bill-row">
                <span class="bill-label">æŠŠç«‹æŠ¬å‡</span>
                <span class="bill-val highlight-val" id="txtOldStemRise">20</span>
            </div>
            <div class="bill-note">å› å¤´ç®¡å€¾æ–œ,è‡ªç„¶æŠ¬é«˜çº¦2cm</div>
            <div class="bill-total">
                <span>åˆè®¡</span>
                <span id="txtOldTotalH">40</span>
            </div>
        </div>
        
        <div class="bill-divider"></div>

        <div class="bill-col">
            <div class="bill-title" style="color:#3b82f6;">New æ–°è½¦</div>
            <div class="bill-row">
                <span class="bill-label">æ–°å«åœˆ</span>
                <span class="bill-val highlight-val" id="txtNewSpacer">10</span>
            </div>
            <div class="bill-row">
                <span class="bill-label">è½¦æŠŠæŠ¬å‡</span>
                <span class="bill-val" style="color:#3b82f6;">54</span>
            </div>
            <div class="bill-note">äº§å“å›ºå®šå‚æ•°</div>
            <div class="bill-total" style="color:#3b82f6;">
                <span>åˆè®¡</span>
                <span id="txtNewTotalH">64</span>
            </div>
        </div>
    </div>

    <div style="height:1px; background:#f1f5f9; margin:20px 0;"></div>

    <div class="explain-h">
        <span>2. è·ç¦»æ˜ç»† (Reach)</span>
        <span style="font-size:0.75em; color:#64748b; font-weight:400;">å•ä½: mm</span>
    </div>
    <div class="bill-grid" style="margin-bottom:0;">
        <div class="bill-col">
            <div class="bill-title">Old æ—§è½¦</div>
            <div class="bill-row">
                <span class="bill-label">æŠŠç«‹æ°´å¹³é•¿</span>
                <span class="bill-val highlight-val" id="txtOldStemRun">98</span>
            </div>
            <div class="bill-row">
                <span class="bill-label">è½¦æŠŠReach</span>
                <span class="bill-val highlight-val" id="txtOldReach">80</span>
            </div>
            <div class="bill-total">
                <span>åˆè®¡</span>
                <span id="txtOldTotalR">178</span>
            </div>
        </div>
        
        <div class="bill-divider"></div>

        <div class="bill-col">
            <div class="bill-title" style="color:#3b82f6;">New æ–°è½¦</div>
            <div class="bill-row">
                <span class="bill-label">æ°´å¹³æŠ˜ç®—é•¿</span>
                <span class="bill-val highlight-val" id="txtNewStemRun">109</span>
            </div>
            <div class="bill-row">
                <span class="bill-label">è½¦æŠŠReach</span>
                <span class="bill-val" style="color:#3b82f6;">70</span>
            </div>
            <div class="bill-total" style="color:#3b82f6;">
                <span>åˆè®¡</span>
                <span id="txtNewTotalR">179</span>
            </div>
        </div>
    </div>

  </div>
</div>


<script>
  // è·å–æ‰€æœ‰è¾“å…¥æ¡†
  const inputs = {
    oldLen: document.getElementById('oldLen'),
    oldAng: document.getElementById('oldAng'),
    oldBarReach: document.getElementById('oldBarReach'),
    oldSpacer: document.getElementById('oldSpacer'),
    newSpacer: document.getElementById('newSpacer'),
    newProduct: document.getElementById('newProduct')
  };

  // è·å–è§£é‡ŠåŒºçš„æ‰€æœ‰æ–‡æœ¬å‘ä½
  const txt = {
    oldSpacer: document.getElementById('txtOldSpacer'),
    oldStemRise: document.getElementById('txtOldStemRise'),
    oldTotalH: document.getElementById('txtOldTotalH'),
    newSpacer: document.getElementById('txtNewSpacer'),
    newTotalH: document.getElementById('txtNewTotalH'),
    
    oldStemRun: document.getElementById('txtOldStemRun'),
    oldReach: document.getElementById('txtOldReach'),
    oldTotalR: document.getElementById('txtOldTotalR'),
    newStemRun: document.getElementById('txtNewStemRun'),
    newTotalR: document.getElementById('txtNewTotalR'),

    // æ–°å¢å˜ç±³æç¤º
    cmTipStack: document.getElementById('cmTipStack'),
    cmTipReach: document.getElementById('cmTipReach')
  };

  // ç»‘å®šäº‹ä»¶
  Object.values(inputs).forEach(el => el.addEventListener('input', runCalc));
  Object.values(inputs).forEach(el => el.addEventListener('change', runCalc));

  function runCalc() {
    // --- 1. å–å€¼ ---
    const oldL = parseFloat(inputs.oldLen.value) || 0;
    const oldA = parseFloat(inputs.oldAng.value) || -6;
    const oldR = parseFloat(inputs.oldBarReach.value) || 0;
    const oldS = parseFloat(inputs.oldSpacer.value) || 0;
    const newS = parseFloat(inputs.newSpacer.value) || 0;

    const sel = inputs.newProduct.options[inputs.newProduct.selectedIndex];
    const newPhysLen = parseFloat(sel.getAttribute('data-phys'));
    const newPhysAng = parseFloat(sel.getAttribute('data-ang'));

    // --- 2. è®¡ç®— (ç§¯æœ¨é€»è¾‘) ---
    
    // æ—§è½¦é«˜åº¦ï¼šå«åœˆ + æŠŠç«‹è‡ªç„¶æŠ¬å‡(çº¦é•¿åº¦çš„20%)
    let factor = 0.2;
    if (oldA <= -15) factor = 0.02; // -17åº¦æŠŠç«‹å¹³çš„
    if (oldA >= 0) factor = 0.35;   // æ­£è§’åº¦æŠŠç«‹å¾ˆé«˜
    
    const oldStemRiseVal = Math.round(oldL * factor);
    const oldTotalH = oldS + oldStemRiseVal;

    // æ–°è½¦é«˜åº¦ï¼šå«åœˆ + 54 (æ­»æ•°)
    const newTotalH = newS + 54;

    // æ—§è½¦Reach
    const oldStemRunVal = Math.round(oldL * 0.98);
    const oldTotalR = oldStemRunVal + oldR;

    // æ–°è½¦Reach
    const newStemRunVal = Math.round(newPhysLen * Math.cos(newPhysAng * Math.PI/180));
    const newTotalR = newStemRunVal + 70;

    // --- 3. æ›´æ–°ç»“æœå¤§å¡ç‰‡ ---
    updateBadge('resStack', 'badgeStack', newTotalH - oldTotalH, 'mm', 'cmTipStack');
    updateBadge('resReach', 'badgeReach', newTotalR - oldTotalR, 'mm', 'cmTipReach');

    // --- 4. æ›´æ–°è´¦å• (Bill) ---
    
    // Stack è´¦å•
    txt.oldSpacer.innerText = oldS;
    txt.oldStemRise.innerText = oldStemRiseVal;
    txt.oldTotalH.innerText = oldTotalH;
    
    txt.newSpacer.innerText = newS;
    txt.newTotalH.innerText = newTotalH;

    // Reach è´¦å•
    txt.oldStemRun.innerText = oldStemRunVal;
    txt.oldReach.innerText = oldR;
    txt.oldTotalR.innerText = oldTotalR;
    
    txt.newStemRun.innerText = newStemRunVal;
    txt.newTotalR.innerText = newTotalR;
  }

  function updateBadge(idNum, idBadge, val, unit, idCmTip) {
    const elNum = document.getElementById(idNum);
    const elBadge = document.getElementById(idBadge);
    const elCm = document.getElementById(idCmTip);
    
    const absVal = Math.abs(val).toFixed(0);
    const sign = val > 0 ? "+" : val < 0 ? "-" : "";
    elNum.innerText = `${sign}${absVal}`;
    
    // æ˜¾ç¤ºå˜ç±³æç¤º
    const cmVal = (Math.abs(val) / 10).toFixed(1);
    elCm.innerText = `â‰ˆ ${cmVal} cm`;

    if (Math.abs(val) < 2) {
      elBadge.innerText = "åŸºæœ¬ä¸å˜";
      elBadge.className = "badge";
      elBadge.style.background = "rgba(255,255,255,0.2)";
    } else if (val > 0) {
      elBadge.innerText = `å¢åŠ  ${Math.abs(val).toFixed(0)}${unit}`;
      elBadge.className = "badge badge-green";
    } else {
      elBadge.innerText = `å‡å°‘ ${Math.abs(val).toFixed(0)}${unit}`;
      elBadge.className = "badge badge-red";
    }
  }

  // åˆå§‹åŒ–
  runCalc();
</script>
</body>
</html>
